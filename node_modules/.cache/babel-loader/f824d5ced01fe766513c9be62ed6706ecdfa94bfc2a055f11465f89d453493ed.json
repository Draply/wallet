{"ast":null,"code":"var _jsxFileName = \"U:\\\\NFT-Mar\\\\faucet\\\\faucet-source\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport Web3 from \"web3\";\nimport { useCallback, useState, useEffect } from 'react';\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport { loadContract } from \"./utils/load-contract\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [web3Api, setWeb3Api] = useState({\n    provider: null,\n    web3: null,\n    contract: null\n  });\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [shouldReload, reload] = useState(false);\n  const reloadEffect = () => reload(!shouldReload);\n  const setAccountLister = provider => {\n    provider.on(\"accountChanged\", accounts => setAccount(accounts[0]));\n  };\n  useEffect(() => {\n    const loadProvider = async () => {\n      const provider = await detectEthereumProvider();\n      const contract = await loadContract(\"Faucet\", provider);\n      debugger;\n      if (provider) {\n        setAccountLister(provider);\n        setWeb3Api({\n          web3: new Web3(provider),\n          provider,\n          contract\n        });\n      } else {\n        console.error(\"please, Install Metamask\");\n      }\n    };\n    loadProvider();\n  }, []);\n  useEffect(() => {\n    const getAccount = async () => {\n      const accounts = await web3Api.web3.eth.getAccounts();\n      setAccount(accounts[0]);\n    };\n    web3Api.web3 && getAccount() && reloadEffect();\n  }, [web3Api.web3]);\n  useEffect(() => {\n    const loadBalance = async () => {\n      const {\n        contract,\n        web3\n      } = web3Api;\n      const balance = await web3.eth.getBalance(contract.address);\n      setBalance(web3.utils.fromWei(balance, \"ether\"));\n    };\n    web3Api.contract && loadBalance();\n  }, [web3Api, shouldReload]);\n  const addFunds = useCallback(async () => {\n    const {\n      contract,\n      web3\n    } = web3Api;\n    await contract.addFunds({\n      from: account,\n      value: web3.utils.toWei(\"1\", \"ether\")\n    });\n    reloadEffect();\n  }, [web3Api, account]);\n  const withdraw = async () => {\n    const {\n      contract,\n      web3\n    } = web3Api;\n    const withdrawAmount = web3.utils.toWei(\"0.5\", \"ether\");\n    await contract.withdraw(withdrawAmount, {\n      from: account\n    });\n    reloadEffect();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"faucet-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"faucet\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balance-view is-size-2\",\n        children: [\"Current Balance: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: balance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 28\n        }, this), \" ETH\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-primary mr-5\",\n        onClick: addFunds,\n        children: \"Donate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-danger mr-5\",\n        onClick: withdraw,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-link\",\n        onClick: () => web3Api.provider.request({\n          method: \"eth_requestAccounts\"\n        }),\n        children: \"Connect Wallets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Accounts Address: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), account ? account : \"Accounts Denined\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jlMSXtzqYK/3FAZ+cgoaNTxJykw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Web3","useCallback","useState","useEffect","detectEthereumProvider","loadContract","App","web3Api","setWeb3Api","provider","web3","contract","account","setAccount","balance","setBalance","shouldReload","reload","reloadEffect","setAccountLister","on","accounts","loadProvider","console","error","getAccount","eth","getAccounts","loadBalance","getBalance","address","utils","fromWei","addFunds","from","value","toWei","withdraw","withdrawAmount","request","method"],"sources":["U:/NFT-Mar/faucet/faucet-source/src/App.js"],"sourcesContent":["import './App.css';\r\nimport Web3 from \"web3\";\r\nimport { useCallback, useState, useEffect } from 'react';\r\nimport detectEthereumProvider from \"@metamask/detect-provider\";\r\nimport { loadContract } from \"./utils/load-contract\";\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [web3Api, setWeb3Api] = useState({\r\n    provider: null,\r\n    web3: null,\r\n    contract: null,\r\n  });\r\n\r\n  const [account, setAccount] = useState(null);\r\n  const [balance, setBalance] = useState(null);\r\n\r\n  const [shouldReload, reload] = useState(false);\r\n  const reloadEffect = () => reload(!shouldReload)\r\n\r\n  const setAccountLister = (provider) => {\r\n    provider.on(\"accountChanged\", accounts => setAccount(accounts[0]))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const loadProvider = async () => {\r\n      const provider = await detectEthereumProvider()\r\n      const contract = await loadContract(\"Faucet\", provider)\r\n\r\n      debugger\r\n\r\n      if (provider) {\r\n        setAccountLister(provider)\r\n        setWeb3Api({\r\n          web3: new Web3(provider),\r\n          provider,\r\n          contract\r\n        })\r\n      } else {\r\n        console.error(\"please, Install Metamask\")\r\n      }\r\n    }\r\n    loadProvider()\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getAccount = async () => {\r\n      const accounts = await web3Api.web3.eth.getAccounts()\r\n      setAccount(accounts[0])\r\n    }\r\n    web3Api.web3 && getAccount() && reloadEffect()\r\n  }, [web3Api.web3]);\r\n\r\n  useEffect(() => {\r\n    const loadBalance = async () => {\r\n      const { contract, web3 } = web3Api\r\n      const balance = await web3.eth.getBalance(contract.address)\r\n      setBalance(web3.utils.fromWei(balance, \"ether\"))\r\n\r\n    }\r\n    web3Api.contract && loadBalance()\r\n  }, [web3Api, shouldReload]);\r\n\r\n  const addFunds = useCallback(async () => {\r\n    const { contract, web3 } = web3Api\r\n    await contract.addFunds({\r\n      from: account,\r\n      value: web3.utils.toWei(\"1\", \"ether\")\r\n    })\r\n    reloadEffect()\r\n  }, [web3Api, account])\r\n\r\n\r\n  const withdraw = async () => {\r\n    const { contract, web3 } = web3Api\r\n    const withdrawAmount = web3.utils.toWei(\"0.5\", \"ether\")\r\n    await contract.withdraw(withdrawAmount, {\r\n      from: account\r\n    })\r\n    reloadEffect()\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"faucet-wrapper\">\r\n      <div className=\"faucet\">\r\n        <div className=\"balance-view is-size-2\">\r\n          Current Balance: <strong>{balance}</strong> ETH\r\n        </div>\r\n        <button className=\"button is-primary mr-5\"\r\n          onClick={addFunds}\r\n        >Donate</button>\r\n        <button className=\"button is-danger mr-5\"\r\n          onClick={withdraw}\r\n        >Withdraw</button>\r\n        <button className=\"button is-link\"\r\n          onClick={() =>\r\n            web3Api.provider.request({ method: \"eth_requestAccounts\" })\r\n          }\r\n        >\r\n          Connect Wallets\r\n        </button>\r\n        <span>\r\n          <p>\r\n            <strong>Accounts Address: </strong>\r\n            {\r\n              account ? account : \"Accounts Denined\"\r\n            }\r\n          </p>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}