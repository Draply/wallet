{"ast":null,"code":"var _jsxFileName = \"U:\\\\NFT-Mar\\\\faucet\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport Web3 from \"web3\";\nimport { useCallback, useState, useEffect } from 'react';\nimport detectEthereumProvider from \"@metamask/detect-provider\";\nimport { loadContract } from \"./utils/load-contract\";\nimport contract from \"@truffle/contract\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [web3Api, setWeb3Api] = useState({\n    provider: null,\n    web3: null,\n    contract: null\n  });\n  const [account, setAccount] = useState(null);\n  const [balance, setBalance] = useState(null);\n  const [shouldReload, reload] = useState(false);\n\n  const reloadEffect = () => reload(!shouldReload);\n\n  const setAccountLister = provider => {\n    provider.on(\"accountChanged\", accounts => setAccount(accounts[0]));\n  };\n\n  useEffect(() => {\n    const loadProvider = async () => {\n      const provider = await detectEthereumProvider();\n      const contract = await loadContract(\"Faucet\", provider);\n\n      if (provider) {\n        setAccountLister(provider);\n        setWeb3Api({\n          web3: new Web3(provider),\n          provider,\n          contract\n        });\n      } else {\n        console.error(\"please, Install Metamask\");\n      }\n    };\n\n    loadProvider();\n  }, []);\n  useEffect(() => {\n    const getAccount = async () => {\n      const accounts = await web3Api.web3.eth.getAccounts();\n      setAccount(accounts[0]);\n    };\n\n    web3Api.web3 && getAccount() && reloadEffect();\n  }, [web3Api.web3]);\n  useEffect(() => {\n    const loadBalance = async () => {\n      const {\n        contract,\n        web3\n      } = web3Api;\n      const balance = await web3.eth.getBalance(contract.address);\n      setBalance(web3.utils.fromWei(balance, \"ether\"));\n    };\n\n    web3Api.contract && loadBalance();\n  }, [web3Api, shouldReload]);\n  const addFunds = useCallback(async () => {\n    const {\n      contract,\n      web3\n    } = web3Api;\n    await contract.addFunds({\n      from: account,\n      value: web3.utils.toWei(\"1\", \"ether\")\n    });\n    reloadEffect();\n  }, [web3Api, account]);\n\n  const withdraw = async () => {\n    const {\n      contract,\n      web3\n    } = web3Api;\n    const withdrawAmount = web3.utils.toWei(\"0.5\", \"ether\");\n    await contract.withdraw(withdrawAmount, {\n      from: account\n    });\n    reloadEffect();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"faucet-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"faucet\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"balance-view is-size-2\",\n        children: [\"Current Balance: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: balance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 28\n        }, this), \" ETH\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is- mr-5\",\n        onClick: addFunds,\n        children: \"Donate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-danger mr-5\",\n        onClick: withdraw,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-link\",\n        onClick: () => web3Api.provider.request({\n          method: \"eth_requestAccounts\"\n        }),\n        children: \"Connect Wallets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Accounts Address: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), account ? account : \"Accounts Denined\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"jlMSXtzqYK/3FAZ+cgoaNTxJykw=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["U:/NFT-Mar/faucet/src/App.js"],"names":["Web3","useCallback","useState","useEffect","detectEthereumProvider","loadContract","contract","App","web3Api","setWeb3Api","provider","web3","account","setAccount","balance","setBalance","shouldReload","reload","reloadEffect","setAccountLister","on","accounts","loadProvider","console","error","getAccount","eth","getAccounts","loadBalance","getBalance","address","utils","fromWei","addFunds","from","value","toWei","withdraw","withdrawAmount","request","method"],"mappings":"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","sourcesContent":["import './App.css';\r\nimport Web3 from \"web3\";\r\nimport { useCallback, useState, useEffect } from 'react';\r\nimport detectEthereumProvider from \"@metamask/detect-provider\";\r\nimport { loadContract } from \"./utils/load-contract\";\r\nimport contract from \"@truffle/contract\";\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [web3Api, setWeb3Api] = useState({\r\n    provider: null,\r\n    web3: null,\r\n    contract: null,\r\n  });\r\n\r\n  const [account, setAccount] = useState(null);\r\n  const [balance, setBalance] = useState(null);\r\n\r\n  const [shouldReload, reload] = useState(false);\r\n  const reloadEffect = () => reload(!shouldReload)\r\n\r\n  const setAccountLister = (provider) => {\r\n    provider.on(\"accountChanged\", accounts => setAccount(accounts[0]))\r\n  }\r\n\r\n  useEffect(() => {\r\n    const loadProvider = async () => {\r\n      const provider = await detectEthereumProvider()\r\n      const contract = await loadContract(\"Faucet\", provider)\r\n\r\n\r\n\r\n      if (provider) {\r\n        setAccountLister(provider)\r\n        setWeb3Api({\r\n          web3: new Web3(provider),\r\n          provider,\r\n          contract\r\n        })\r\n      } else {\r\n        console.error(\"please, Install Metamask\")\r\n      }\r\n    }\r\n    loadProvider()\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getAccount = async () => {\r\n      const accounts = await web3Api.web3.eth.getAccounts()\r\n      setAccount(accounts[0])\r\n    }\r\n    web3Api.web3 && getAccount() && reloadEffect()\r\n  }, [web3Api.web3]);\r\n\r\n  useEffect(() => {\r\n    const loadBalance = async () => {\r\n      const { contract,web3} = web3Api\r\n      const balance = await web3.eth.getBalance(contract.address)\r\n      setBalance(web3.utils.fromWei(balance, \"ether\"))\r\n\r\n\r\n    }\r\n    web3Api.contract && loadBalance()\r\n  }, [web3Api, shouldReload]);\r\n\r\n  const addFunds = useCallback(async () => {\r\n    const { contract, web3 } = web3Api\r\n    await contract.addFunds({\r\n      from: account,\r\n      value: web3.utils.toWei(\"1\", \"ether\")\r\n    })\r\n    reloadEffect()\r\n  }, [web3Api, account])\r\n\r\n\r\n  const withdraw = async () => {\r\n    const { contract, web3 } = web3Api\r\n    const withdrawAmount = web3.utils.toWei(\"0.5\", \"ether\")\r\n    await contract.withdraw(withdrawAmount, {\r\n      from: account\r\n    })\r\n    reloadEffect()\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"faucet-wrapper\">\r\n      <div className=\"faucet\">\r\n        <div className=\"balance-view is-size-2\">\r\n          Current Balance: <strong>{balance}</strong> ETH\r\n        </div>\r\n        <button className=\"button is- mr-5\"\r\n          onClick={addFunds}\r\n        >Donate</button>\r\n        <button className=\"button is-danger mr-5\"\r\n          onClick={withdraw}\r\n        >Withdraw</button>\r\n        <button className=\"button is-link\"\r\n          onClick={() =>\r\n            web3Api.provider.request({ method: \"eth_requestAccounts\" })\r\n          }\r\n        >\r\n          Connect Wallets\r\n        </button>\r\n        <span>\r\n          <p>\r\n            <strong>Accounts Address: </strong>\r\n            {\r\n              account ? account : \"Accounts Denined\"\r\n            }\r\n          </p>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}